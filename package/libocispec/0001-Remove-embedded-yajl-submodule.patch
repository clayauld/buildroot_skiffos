From f96e6942ee75d0d575f496cc99899826f34723e3 Mon Sep 17 00:00:00 2001
From: Christian Stewart <christian@paral.in>
Date: Sat, 20 Aug 2022 19:11:10 -0700
Subject: [PATCH] Remove embedded yajl submodule

Signed-off-by: Christian Stewart <christian@paral.in>
---
 .gitmodules  | 3 ---
 Makefile.am  | 3 ---
 autogen.sh   | 4 ----
 configure.ac | 4 ++--
 4 files changed, 2 insertions(+), 12 deletions(-)

diff --git a/.gitmodules b/.gitmodules
index 0381f81..c69ddca 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -4,6 +4,3 @@
 [submodule "image-spec"]
 	path = image-spec
 	url = https://github.com/opencontainers/image-spec
-[submodule "yajl"]
-	path = yajl
-	url = https://github.com/containers/yajl.git
diff --git a/Makefile.am b/Makefile.am
index c845a04..91a8ab9 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -1,6 +1,3 @@
-DIST_SUBDIRS = yajl
-SUBDIRS = yajl
-
 AM_CFLAGS = $(WARN_CFLAGS) -I$(top_srcdir)/src -I$(top_builddir)/src
 
 if HAVE_EMBEDDED_YAJL
diff --git a/autogen.sh b/autogen.sh
index d8bbf0e..4674ca8 100755
--- a/autogen.sh
+++ b/autogen.sh
@@ -1,9 +1,5 @@
 #!/bin/sh
 
-(cd yajl; ./autogen.sh)
-
-git submodule update --init --recursive
-
 test -n "$srcdir" || srcdir=`dirname "$0"`
 test -n "$srcdir" || srcdir=.
 
diff --git a/configure.ac b/configure.ac
index 8da376a..681d110 100644
--- a/configure.ac
+++ b/configure.ac
@@ -12,8 +12,8 @@ AM_INIT_AUTOMAKE([1.11 -Wno-portability foreign tar-ustar no-dist-gzip dist-xz s
 AM_MAINTAINER_MODE([enable])
 AM_SILENT_RULES([yes])
 
-AM_EXTRA_RECURSIVE_TARGETS([yajl])
-AC_CONFIG_SUBDIRS([yajl])
+# AM_EXTRA_RECURSIVE_TARGETS([yajl])
+# AC_CONFIG_SUBDIRS([yajl])
 
 AC_ARG_ENABLE(embedded-yajl,
 AS_HELP_STRING([--enable-embedded-yajl], [Statically link a modified yajl version]),
-- 
2.37.2

